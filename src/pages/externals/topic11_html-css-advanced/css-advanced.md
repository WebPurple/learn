---
title: CSS. Продвинутый уровень
templateKey: 'article-page'
order: 2
tags: css, advanced
---

<p align="center">
    <img
        width='100'
        title='CSS'
        src="../images/css3.svg"
    />
</p>

# CSS. Продвинутый уровень

В CSS3 появилось очень много интересных возможностей - например, анимации и переходы, и функции.

Важно помнить, что некоторые из них не будут работать в старых браузерах, поэтому, если необходимо их поддерживать, стоит проверить свойство на [caniuse](https://caniuse.com/) 

## CSS Function

Функции позволяют делать то, что раньше было возможно только с помощью js. 

В CSS существует множество функций:

-   `attr()`
-   `calc()`
-   `filter()`
-   `transform()`
-   `linear-gradient()`
-   `radial-gradient()`
-   `repeating-linear-gradient()`
-   `repeating-radial-gradient()` etc.

[Подробнее](https://www.w3schools.com/cssref/css_functions.asp)

[example](http://jsbin.com/lubici/edit?html,css,output)

### Calc

Функция позволяет производить простые арифметические расчёты в CSS. Ее можно использовать где угодно, где требуется длина или размер. Можно свободно смешивать разные единицы, например, проценты и пиксели. Это делает устаревшими множество хаков разметки, которые использовали в прошлом. Функция работает в IE9 и выше, без префиксов.

```css
.container {
	/* Расчёт ширины */
    width: calc(100% - 40px);
}
```

### Attr

Функция attr() применяется для добавления значения атрибута HTML-элемента в стилевое свойство. 

Между версиями CSS есть небольшая разница по прочтению некоторых особенностей attr(). В CSS2 функция attr() может использоваться только совместно со свойством content и всегда возвращает строку в качестве значения. В CSS3 attr() допустимо применять с любым свойством и возвращаемое значение может быть в любом корректном для CSS3 формате.

```css
a:after {
  content: " (" attr(href) ")";
}
```

### Filter

Свойство `filter` позволяет использовать различные эффекты, например, размытие или прозрачность. Обычно фильтры используются для картинок, фона или границ.

```css
filter: url(resources.svg);
filter: blur(5px);
filter: brightness(0.4);
filter: contrast(200%);
filter: drop-shadow(16px 16px 20px blue);
filter: grayscale(50%);
filter: hue-rotate(90deg);
filter: invert(75%);
filter: opacity(25%);
filter: saturate(30%);
filter: sepia(60%);

/* Using 2 and more filters */
filter: contrast(175%) brightness(3%);

/* Global values */
filter: inherit;
filter: initial;
filter: unset;
```

[example](http://jsbin.com/jumalic/edit?html,css,output)


## Анимации и переходы

### CSS-переходы

Идея CSS-переходов проста: мы указываем, что некоторое свойство должно быть анимировано, и как оно должно быть анимировано. А когда свойство меняется, браузер сам обработает это изменение и отрисует анимацию.

Всё что нам нужно, чтобы начать анимацию – это изменить свойство, а дальше браузер сделает плавный переход сам.

Есть много разных методов, самые популярные - это transform и transition

#### Transition

Свойство `transition` позволяет контролировать скорость анимации при изменении каких-либо CSS-свойств.

`transition` можно разбивать на составляющие. Есть 4 свойства:

- `transition-property` – свойство перехода - задается  записывается список свойств, изменения которых необходимо анимировать, например: left, margin-left, height, color. Анимировать можно не все свойства, но многие из них. Значение свойства all означает «анимируй все свойства».

- `transition-duration` – продолжительность перехода - в s или ms

- `transition-delay` – задержка начала перехода. можно определить задержку перед началом анимации. Например, если transition-delay: 1s, тогда анимация начнётся через 1 секунду после изменения свойства.

- `transition-timing-function` – временная функция перехода

Временная функция описывает, как процесс анимации будет распределён во времени. Будет ли она начата медленно и затем ускорится или наоборот.<br/>
Эта функция задается с помощью кривой Безье (cubic-bezier), которая принимает 4 значения (x1,y1,x2,y2) - координаты направляющих точек

[transition-timing-function](https://learn.javascript.ru/css-animations#transition-timing-function)

[Наглядные примеры функций](http://htmlbook.ru/css/transition-timing-function)

[Онлайн генератор для анимаций через кривую безье](https://cubic-bezier.com/)

[Подробнее](https://developer.mozilla.org/ru/docs/Web/CSS/CSS_Transitions/Using_CSS_transitions).

#### Transform

Свойство `transform` производит 2D или 3D трансформации элемента. Свойство позволяет вращать, масштабировать, двигать, искажать элементы.

[Подробнее](https://developer.mozilla.org/en-US/docs/Web/CSS/transform).


### CSS-анимации

С помощью `transform` и `transition` можно делать интересные вещи, но иногда этого недостаточно - например, есть необходимость сделать какую-то анимацию, которая будет бесконечно выполняться. Или циклично. Можно написать специальную функцию, но все уже сделано - эти и другие возможности предоставляет нам api `@keyframes`.
Это анимация элементов без JS или Flash.

#### @keyframes

Создание анимации начинается с установки ключевых кадров правила `@keyframes`. Кадры определяют, какие свойства на каком шаге будут анимированы. Каждый кадр может включать один или более блоков объявления из одного или более пар свойств и значений. Правило `@keyframes` содержит имя анимации элемента, которое связывает правило и блок объявления элемента.
Ключевые кадры используются для указания значений свойств анимации в различных точках анимации. Ключевые кадры определяют поведение одного цикла анимации; анимация может повторяться ноль или более раз.

Ключевые кадры создаются с помощью ключевых слов from и to (эквивалентны значениям 0% и 100%) или с помощью процентных пунктов, которых можно задавать сколько угодно. Также можно комбинировать ключевые слова и процентные пункты

Если несколько правил `@keyframes` определены с одним и тем же именем, сработает последнее в порядке документа, а все предыдущие проигнорируются.

После объявления правила `@keyframes`, мы можем ссылаться на него в свойстве `animation`:

```css
@keyframes rotate {
	to { transform: rotate(360deg); }
}

.loader {
	animation: rotate 30s infinite linear;
}
```

#### animation

Свойство `animation` - это короткая запись для многих свойств:
- `animation-name` 

- `animation-duration`

- `animation-timing-function`

- `animation-delay`

- `animation-iteration-count`

- `animation-direction`

- `animation-fill-mode` 

- `animation-play-state`

Обычно достаточно `animation-name`, `animation-duration`, `animation-timing-function`, `animation-delay` (см. пример выше). 

Есть важный момент - порядок важен в каждом определении анимации: первое значение, которое может быть проанализировано как `<time>` присваивается `animation-duration`, и второе назначено `animation-delay`. 

Значение `infinite` - это  такое же время, которое может быть задано через ms или s

[Подробнее](https://www.w3schools.com/css/css3_animations.asp).

[example](http://jsbin.com/yajikob/edit?html,css,output)
